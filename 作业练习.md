<!--
 * @Author: your name
 * @Date: 2022-03-31 15:36:12
 * @LastEditTime: 2022-03-31 21:01:27
 * @LastEditors: Please set LastEditors
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \docker学习\作业练习.md
-->
# nginx
```shell
    docker search nginx
    docker pull nginx
    docker run -d --name nginx01 -p 3344:80 nginx
    docker ps

    curl 127.0.0.1:3344 # 查看请求
    docker exec -it nginx01 /bin/bash
    whereis nginx # 查看程序地址和配置文件
```
> nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx
# tomcat
docker run -it --rm tomcat:9.0 
之前的启动都是后台，启动了之后，容器还是可以查到。--rm一般用来测试，用完即删
docker pull tomcat
docker run -d -p 3355:8080 --name tomcat01 tomcat
...
但是官方的镜像精简版没有webapps（报404）
# es+kibana
es 暴露的端口很多、耗内存、数据需要放置到安全目录
> docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:7.6.2
docker stats 查看资源占用情况
添加 '-e ES_JAVA_OPTS="-Xms128m -Xmx512m" '配置ElasticSearch的虚拟机占用的内存大小。
# Portaniner
Docker的图形化管理工具，类似的工具还有Rancher(CI/CD再用)
docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer
# 安装MySQL
docker run -d -p3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7
如果删除容器，数据仍然在
# 构建自己的CentOS
```Dockerfile
    FROM centos
    MAINTAINER bx<1373953675@qq.com>
    ENV MYPATH /usr/local
    WORKDIR $MYPATH # 进入容器默认到此目录

    RUN yum -y install vim
    RUN yum -y install net-tools

    EXPOSE 80
    CMD echo $MYPATH
    CMD echo "------end-----"
    CMD /bin/bash
```
docker build -f Dockerfile -t mycentos:0.1 .
docker history imagesId # 查看镜像构建历史
# 一步步编写Tomcat Dockerfile
需要：tomcat的压缩包，jdk的压缩包
[tomcat](http://archive.apache.org/dist/tomcat/tomcat-9/v9.0.22/bin/apache-tomcat-9.0.22.tar.gz)
[jdk](https://pan.baidu.com/s/19Eg67jW6V5XkDAfYQ0lxhA?code=6r5f)
touch readme.txt
vim Dockerfile:
    FROM centos
    MAINTAINER BX<1373953675@qq.com>

    COPY readme.txt /usr/local/readme.txt
    
    ADD jdk-...- /usr/local/
    ADD apache-tomcat-... /usr/local/
    # RUN yum -y intall vim
    ENV MYPATH /usr/local/
    WORKDIR $MYPATH
    ENV JAVA_HOME /usr/local/jdk1.8.0_11
    ENV CLASS_PATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
    ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.22
    ENV CATALINA_BASE /usr/local/apache-tomcat-9.0.22
    ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin

    EXPOSE 8080
    CMD /usr/local/apache-tomcat-9.0.22/bin/startup.sh && tail -F /usr/local/apache-tomcat-9.0.22/bin/logs/catalina.out
docker build -t diytomcat .
docker run -d -p 9090:8080 --name bxtomcat -v /home/fish/tomcat/test:/usr/local/apache-tomcat-9.0.22/webapps/test -v /home/fish/tomcat/tomcatlogs:/home/fish/tomcat/test:/usr/local/apache-tomcat-9.0.22/logs/ diytomcat